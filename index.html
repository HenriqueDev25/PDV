<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Louisiana PDV - Premium Edition</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --bg-dark: #0f1115;
            --card-dark: #1a1d23;
            --accent-green: #22c55e;
        }

        body { 
            font-family: 'Plus Jakarta Sans', sans-serif; 
            background-color: var(--bg-dark); 
            color: white;
            height: 100vh; 
            overflow: hidden; 
            margin: 0; 
        }

        /* COMPONENTES VISUAIS */
        .glass { background: rgba(26, 29, 35, 0.8); backdrop-filter: blur(12px); border: 1px solid rgba(255,255,255,0.05); }
        .tab-content { display: none; height: 100%; animation: fadeIn 0.3s ease-out; }
        .tab-content.active { display: flex; flex-direction: column; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(5px); } to { opacity: 1; transform: translateY(0); } }

        .tab-btn.active { background: var(--accent-green); color: black; box-shadow: 0 0 15px rgba(34, 197, 94, 0.3); }
        
        .grid-pdv { 
            display: grid; 
            grid-template-columns: repeat(auto-fill, minmax(180px, 1fr)); 
            gap: 1rem;
        }

        .card-produto {
            background: var(--card-dark);
            border: 1px solid rgba(255,255,255,0.03);
            border-radius: 1.25rem;
            padding: 1rem;
            transition: all 0.3s ease;
        }

        /* SCROLLBAR */
        .custom-scroll::-webkit-scrollbar { width: 6px; }
        .custom-scroll::-webkit-scrollbar-track { background: transparent; }
        .custom-scroll::-webkit-scrollbar-thumb { background: #334155; border-radius: 10px; }

        .hidden-app { display: none !important; }
        input, select { background: #262a33 !important; border: 1px solid #334155 !important; color: white !important; }
        
        /* SWITCH TOGGLE */
        .switch { position: relative; display: inline-block; width: 40px; height: 20px; }
        .switch input { opacity: 0; width: 0; height: 0; }
        .slider { position: absolute; cursor: pointer; inset: 0; background-color: #334155; transition: .4s; border-radius: 20px; }
        .slider:before { position: absolute; content: ""; height: 14px; width: 14px; left: 3px; bottom: 3px; background-color: white; transition: .4s; border-radius: 50%; }
        input:checked + .slider { background-color: var(--accent-green); }
        input:checked + .slider:before { transform: translateX(20px); }
    </style>
</head>
<body>

<div id="appInterface" class="flex flex-col h-screen">
    <header class="h-20 flex items-center justify-between px-8 border-b border-white/5 bg-[#0f1115] shrink-0 z-50">
        <h1 class="text-2xl font-black italic tracking-tighter">LOUISIANA <span class="text-green-500">PDV</span></h1>
        <nav class="flex items-center gap-2 bg-white/5 p-1.5 rounded-2xl">
            <button onclick="switchTab('venda')" id="btn-venda" class="tab-btn active px-5 py-2.5 text-[10px] font-bold rounded-xl transition-all uppercase">Vendas (F1)</button>
            <button onclick="switchTab('estoque')" id="btn-estoque" class="tab-btn px-5 py-2.5 text-[10px] font-bold rounded-xl transition-all uppercase text-slate-400">Estoque (F2)</button>
            <button onclick="switchTab('historico')" id="btn-historico" class="tab-btn px-5 py-2.5 text-[10px] font-bold rounded-xl transition-all uppercase text-slate-400">Relat√≥rios (F3)</button>
            <button onclick="switchTab('config')" id="btn-config" class="tab-btn px-5 py-2.5 text-[10px] font-bold rounded-xl transition-all uppercase text-slate-400">Config (F4)</button>
        </nav>
        <div class="w-20"></div> 
    </header>

    <main class="flex-1 overflow-hidden relative">
        <section id="venda" class="tab-content active p-6">
            <div class="flex h-full gap-6 overflow-hidden text-slate-500 items-center justify-center">
                Selecione os produtos para iniciar a venda...
            </div>
        </section>

        <section id="estoque" class="tab-content p-6 h-full">
            <div class="max-w-6xl mx-auto w-full flex flex-col h-full overflow-hidden">
                <div class="glass p-6 rounded-[2rem] shadow-2xl mb-6 shrink-0 flex items-center justify-between">
                    <div class="flex gap-4">
                        <h2 class="text-lg font-bold">Gest√£o de Invent√°rio</h2>
                        <button onclick="gerarListaCompra()" class="bg-[#25D366] hover:bg-[#128C7E] text-white px-5 py-3 rounded-xl font-black text-[10px] uppercase flex items-center gap-2 transition-transform active:scale-95">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="currentColor" viewBox="0 0 24 24"><path d="M.057 24l1.687-6.163c-1.041-1.804-1.588-3.849-1.588-5.946 0-6.556 5.332-11.888 11.888-11.888 3.176 0 6.161 1.237 8.404 3.48s3.481 5.229 3.481 8.406c0 6.556-5.333 11.888-11.889 11.888-2.01 0-3.987-.512-5.746-1.483l-6.237 1.637zm6.347-4.145l.356.211c1.517.898 3.268 1.373 5.068 1.373 5.518 0 10.009-4.491 10.009-10.009 0-5.517-4.49-10.008-10.008-10.008-5.519 0-10.009 4.491-10.009 10.009 0 1.957.571 3.864 1.651 5.48l.233.348-.992 3.626 3.692-.969z"/></svg>
                            Enviar Lista via WhatsApp Web
                        </button>
                    </div>
                </div>
                
                <div class="flex-1 overflow-y-auto pr-2 custom-scroll pb-10">
                    <div id="listaEstoqueGrid" class="grid-pdv">
                        </div>
                </div>
            </div>
        </section>

        <section id="config" class="tab-content p-8 h-full">
            <div class="max-w-xl mx-auto w-full glass rounded-[2.5rem] p-10 space-y-8">
                <h2 class="text-2xl font-black italic">Ajustes <span class="text-green-500">Inteligentes</span></h2>
                
                <div class="space-y-6">
                    <div class="flex items-center justify-between p-5 bg-white/5 rounded-2xl border border-white/5">
                        <div>
                            <p class="font-bold text-sm">Monitor de Reposi√ß√£o</p>
                            <p class="text-[10px] text-slate-500 uppercase font-bold tracking-wider">Ativar alertas de estoque baixo</p>
                        </div>
                        <label class="switch">
                            <input type="checkbox" id="cfgAtivarAviso" checked>
                            <span class="slider"></span>
                        </label>
                    </div>

                    <div class="grid grid-cols-2 gap-4">
                        <div class="space-y-2">
                            <label class="text-[9px] uppercase font-black text-slate-500 ml-1">Quantidade M√≠nima</label>
                            <input type="number" id="cfgLimiteEstoque" value="5" class="w-full p-4 rounded-xl font-bold">
                        </div>
                        <div class="space-y-2">
                            <label class="text-[9px] uppercase font-black text-slate-500 ml-1">Telefone (DDD + N√öMERO)</label>
                            <input type="text" id="cfgWhatsapp" placeholder="5511999999999" class="w-full p-4 rounded-xl font-bold">
                        </div>
                    </div>

                    <button onclick="salvarConfig()" class="w-full bg-green-500 text-black font-black py-5 rounded-2xl uppercase tracking-widest text-xs shadow-lg shadow-green-500/20">
                        Salvar Configura√ß√µes
                    </button>
                    <p class="text-center text-[9px] text-slate-600 font-bold uppercase tracking-widest">As altera√ß√µes s√£o aplicadas instantaneamente</p>
                </div>
            </div>
        </section>
    </main>
</div>

<script>
    // Configura√ß√µes e WhatsApp
    const getConfig = () => JSON.parse(localStorage.getItem('louisiana_cfg')) || { ativo: true, limite: 5, whatsapp: "" };

    function salvarConfig() {
        const cfg = {
            ativo: document.getElementById('cfgAtivarAviso').checked,
            limite: parseInt(document.getElementById('cfgLimiteEstoque').value),
            whatsapp: document.getElementById('cfgWhatsapp').value.replace(/\D/g, '')
        };
        localStorage.setItem('louisiana_cfg', JSON.stringify(cfg));
        alert("Configura√ß√µes atualizadas!");
    }

    function gerarListaCompra() {
        const cfg = getConfig();
        if(!cfg.ativo) return alert("A fun√ß√£o de aviso est√° desativada nas configura√ß√µes.");
        if(!cfg.whatsapp) return alert("Por favor, configure o n√∫mero do WhatsApp na aba Config (F4).");

        // Simula√ß√£o de produtos filtrados (no seu c√≥digo real, use a vari√°vel 'produtos')
        const itensBaixos = produtos.filter(p => p.estoque <= cfg.limite);

        if(itensBaixos.length === 0) return alert("Nenhum produto abaixo do limite m√≠nimo!");

        let texto = `*üìã LISTA DE REPOSI√á√ÉO - LOUISIANA PDV*%0A%0A`;
        itensBaixos.forEach(p => {
            texto += `‚Ä¢ *${p.nome}* (Estoque atual: ${p.estoque})%0A`;
        });
        texto += `%0A_Enviado via Terminal PDV_`;

        // O segredo para abrir no NAVEGADOR (WhatsApp Web):
        const url = `https://web.whatsapp.com/send?phone=${cfg.whatsapp}&text=${texto}`;
        window.open(url, '_blank');
    }

    function switchTab(id) {
        document.querySelectorAll('.tab-content').forEach(t => t.classList.remove('active'));
        document.querySelectorAll('.tab-btn').forEach(b => {
            b.classList.remove('active');
            b.classList.add('text-slate-400');
        });
        document.getElementById(id).classList.add('active');
        document.getElementById('btn-' + id).classList.add('active');
        document.getElementById('btn-' + id).classList.remove('text-slate-400');
    }

    // Atalhos
    window.addEventListener('keydown', (e) => {
        if (e.key === 'F1') switchTab('venda');
        if (e.key === 'F2') switchTab('estoque');
        if (e.key === 'F3') switchTab('historico');
        if (e.key === 'F4') switchTab('config');
    });
</script>
</body>
</html>
